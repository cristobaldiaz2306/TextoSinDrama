<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>

        body {
            background-image: url("{% static 'imagenes/fondo.jpg' %}");
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat;
            color: #FFA500; 
            flex: 1; 
        }

        .navbar {
            background-color: black; 
            color: #FFA500; 
            padding: 1em 0;
        }

        .navbar a {
            color: #FFA500;
            text-decoration: none;
            margin: 0 1em;
            transition: color 0.3s;
        }

        .navbar a:hover {
            color: white;
        }

        #container_quiz {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            max-width: 1000px;
            background-color: rgba(0, 0, 0, 0.85); 
            border-radius: 10px; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); 
            padding: 2em;
            margin: 2em auto;
            color: #FFA500;
        }

        .quiz-content {
            font-size: 1.2em;
            line-height: 1.6; 
            margin-bottom: 2em;
        }

        .quiz-questions {
            font-weight: bold;
            background-color: #333;
            padding: 1.5em;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); 
            max-width: 800px; 
            margin: 0 auto;
        }

        .question {
            margin-top: 1em;
            padding-bottom: 1em; 
            border-bottom: 1px solid #555; 
        }

        .question p {
            font-size: 1.1em;
            color: #FFA500;
            font-weight: 600;
            margin-bottom: 0.5em;
            line-height: 1.4;
        }

        .question input[type="radio"] {
            margin-right: 0.5em;
            cursor: pointer;
        }

        .question label {
            font-size: 1em;
            display: flex; 
            align-items: center;
            padding: 0.5em;
            cursor: pointer; 
            transition: background-color 0.3s, color 0.3s;
            border-radius: 5px; 
            color: #FFA500;
            background-color: #333;
        }

        .question input[type="radio"]:hover + label {
            background-color: #555;
        }

        .question input[type="radio"]:checked + label {
            background-color: #FFA500;
            color: black;
        }

        .feedback {
            text-align: center;
            margin-top: 2em;
            padding: 1em;
            border-radius: 8px;
            font-size: 1.2em;
        }

        .feedback img {
            margin-top: 1em;
            width: 100px;
        }


        footer {
            width: 100%;
            position: fixed;
            bottom: 0;
            background-color: #000000;
            color: #FFA500;
            padding: 1em;
        }

        footer p {
            margin: 0;
            padding: 0.5em 0;
        }

        @media (max-width: 768px) {
            .quiz-questions {
                padding: 1em;
            }

            .quiz-content,
            .quiz-questions {
                width: 100%; 
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Texto sin Drama</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="{% url 'index' %}">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'listaQuiz' %}">Ejercicios</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'listaQuiz' %}">Quizzes</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Contacto</a></li>
                    
                    {% if user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'perfil' %}">Perfil</a></li>
                        <li class="nav-item"><a class="nav-link" href="#">Cerrar Sesión</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Iniciar Sesión</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'ingresoUsuarios' %}">Registrarse</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div id="container_quiz" class="container mt-5">
        <h5>Lee atentamente el texto y responde las preguntas. Puedes usar un diccionario o buscar el significado de</h5>
        <p>Después de atravesar la puerta mágica, Lía y Tomás se encuentran en un vasto desierto iluminado por dos lunas brillantes. Mientras caminan, descubren un oasis oculto en el horizonte. Allí, encuentran un anciano sabio que les ofrece una brújula mágica para guiarlos, pero solo si responden una serie de acertijos.</p>
        <p>El anciano les pregunta: "¿Qué es algo que, aunque lo compartas, nunca se divide?" Lía reflexiona y responde: "El conocimiento". Satisfecho, el anciano les entrega la brújula y les advierte que no deben desviarse de su curso.</p>
        <p>Siguiendo la brújula, llegan a un castillo flotante rodeado por un foso de lava. En la entrada, encuentran una inscripción que dice: "Solo aquellos que confían en su compañero cruzarán sin caer". Tomás, tomando la mano de Lía, se aventura primero, confiando en que juntos lograrán cruzar. Los puentes invisibles se materializan bajo sus pies y logran alcanzar la puerta del castillo.</p>
        <p>Dentro del castillo, un reloj gigante marca la cuenta regresiva de una hora. En el centro, un pedestal sostiene un cristal dorado que parece ser la clave para completar su misión. Sin embargo, al acercarse, el reloj comienza a moverse más rápido...</p>
    
        <h5 style="color: #FFA500;">Preguntas:</h5>
        <div class="quiz-questions mt-4">
            <h7 style="color: #FFA500;"></h7>
            <div class="question mt-3">
                <p>11) ¿Qué significa la palabra "vastos" en el texto?</p>
                <div>
                    <input type="radio" id="q11a" name="q11" value="a">
                    <label for="q11a">a) Pequeños</label>
                </div>
                <div>
                    <input type="radio" id="q11b" name="q11" value="b">
                    <label for="q11b">b) Grandes</label>
                </div>
                <div>
                    <input type="radio" id="q11c" name="q11" value="c">
                    <label for="q11c">c) Oscuros</label>
                </div>
            </div>
            
            <div class="question">
                <p>12) ¿Qué significa la palabra "brillante" en la frase "lunass brillantes"?</p>
                <div>
                    <input type="radio" id="q12a" name="q12" value="a">
                    <label for="q12a">a) Muy oscuras</label>
                </div>
                <div>
                    <input type="radio" id="q12b" name="q12" value="b">
                    <label for="q12b">b) Muy brillantes</label>
                </div>
                <div>
                    <input type="radio" id="q12c" name="q12" value="c">
                    <label for="q12c">c) Muy frías</label>
                </div>
            </div>
            
            <div class="question">
                <p>13) En la frase "los puentes invisibles se materializan bajo sus pies", ¿qué significa "materializan"?</p>
                <div>
                    <input type="radio" id="q13a" name="q13" value="a">
                    <label for="q13a">a) Aparecen</label>
                </div>
                <div>
                    <input type="radio" id="q13b" name="q13" value="b">
                    <label for="q13b">b) Se rompen</label>
                </div>
            </div>
            
            <div class="question">
                <p>14) ¿Qué tipo de oración es "Lía reflexiona y responde: 'El conocimiento'"?</p>
                <div>
                    <input type="radio" id="q14a" name="q14" value="a">
                    <label for="q14a">a) Afirmativa</label>
                </div>
                <div>
                    <input type="radio" id="q14b" name="q14" value="b">
                    <label for="q14b">b) Interrogativa</label>
                </div>
            </div>
            
            <div class="question">
                <p>15) ¿Qué quiere decir la frase "no deben desviarse de su curso"?</p>
                <div>
                    <input type="radio" id="q15a" name="q15" value="a">
                    <label for="q15a">a) No deben cambiar de dirección</label>
                </div>
                <div>
                    <input type="radio" id="q15b" name="q15" value="b">
                    <label for="q15b">b) Deben ir más rápido</label>
                </div>
            </div>
           
        <div class="feedback" id="feedback"></div>
        
        <button class="btn btn-warning mt-3" id="sendButton" onclick="evaluateCurrentQuestion()">Enviar Respuesta</button>
        <button class="btn btn-success mt-3" id="retryButton" style="display: none;" onclick="resetQuiz()">Reintentar Cuestionario</button>
    </div>

    <footer class="bg-dark text-center py-3 mt-5" style="color: #FFA500;">
        <p>&copy; 2024 Lectura Pro. Todos los derechos reservados.</p>
    </footer>

<script>
    const correctAnswers = ['b', 'b', 'a', 'a', 'a']; // Respuestas correctas
    let currentQuestionIndex = 0; // Controla qué pregunta está activa
    let score = 0; // Puntaje actual

    // Ocultar todas las preguntas excepto la primera al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
        const questionDivs = document.querySelectorAll('.question');
        questionDivs.forEach((question, index) => {
            question.style.display = index === currentQuestionIndex ? 'block' : 'none';
        });
    });

    function evaluateCurrentQuestion() {
        const questionDivs = document.querySelectorAll('.question');
        const currentQuestion = questionDivs[currentQuestionIndex];

        const selectedAnswer = currentQuestion.querySelector('input[type="radio"]:checked');
        if (selectedAnswer) {
            const userAnswer = selectedAnswer.value;
            const feedback = document.getElementById('feedback');

            if (userAnswer === correctAnswers[currentQuestionIndex]) {
                score++;
                feedback.innerHTML = '<p style="color: green;">¡Respuesta correcta!</p>';
            } else {
                feedback.innerHTML = '<p style="color: red;">Respuesta incorrecta. La respuesta correcta era: ' +
                                     correctAnswers[currentQuestionIndex] +
                                     '.</p>';
            }

            setTimeout(() => {
                feedback.innerHTML = '';
                currentQuestion.style.display = 'none';
                currentQuestionIndex++;

                if (currentQuestionIndex < questionDivs.length) {
                    questionDivs[currentQuestionIndex].style.display = 'block';
                } else {
                    displayFinalResult();
                }
            }, 2000); // Cambia de pregunta después de 2 segundos
        } else {
            alert('Por favor, selecciona una respuesta.');
        }
    }

    function displayFinalResult() {
    const percentage = (score / correctAnswers.length) * 100;

    if (percentage === 100) {
        window.location.href = "{% url 'oro1' %}";
    } else if (percentage >= 50) {
        window.location.href = "{% url 'plata1' %}";
    } else if (percentage > 0) {
        window.location.href = "{% url 'bronce1' %}";
    } else {
        window.location.href = "{% url 'sinMedalla1' %}";
    }
}


    function resetQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById('feedback').innerHTML = '';
        document.getElementById('retryButton').style.display = 'none';
        document.getElementById('sendButton').style.display = 'block';

        const questionDivs = document.querySelectorAll('.question');
        questionDivs.forEach((question, index) => {
            question.style.display = index === 0 ? 'block' : 'none';
        });
    }
</script>

</body>
</html>

